

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. NumPy: creating and manipulating numerical data &mdash; Python Scientific Lecture Notes</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2010',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Python Scientific Lecture Notes" href="../index.html" />
    <link rel="next" title="5. Getting help and finding documentation" href="../help/help.html" />
    <link rel="prev" title="3.10. Object-oriented programming (OOP)" href="../language/oop.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../help/help.html" title="5. Getting help and finding documentation"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="../language/oop.html" title="3.10. Object-oriented programming (OOP)"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Scipy Lecture Notes</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="numpy-creating-and-manipulating-numerical-data">
<h1>4. NumPy: creating and manipulating numerical data<a class="headerlink" href="#numpy-creating-and-manipulating-numerical-data" title="Permalink to this headline">¶</a></h1>
<div class="topic">
<p class="topic-title first">The array: the basic tool for scientific computing</p>
<img align="right" alt="../_images/simple_histo.jpg" class="align-right" src="../_images/simple_histo.jpg" />
<p>Frequent manipulation of <strong>discrete sorted datasets</strong> :</p>
<ul class="simple">
<li>discretized time of an experiment/simulation</li>
<li>signal recorded by a measurement device</li>
<li>pixels of an image, ...</li>
</ul>
<p>The <strong>Numpy</strong> module allows to</p>
<ul class="simple">
<li>create such datasets in one shot</li>
<li>realize batch operations on data arrays (no loops on their items)</li>
</ul>
<p>Data arrays := <tt class="docutils literal"><span class="pre">numpy.ndarray</span></tt></p>
</div>
<div class="section" id="creating-numpy-data-arrays">
<h2>4.1. Creating NumPy data arrays<a class="headerlink" href="#creating-numpy-data-arrays" title="Permalink to this headline">¶</a></h2>
<p>A small introductory example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([0, 1, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">a</span>
<span class="go">[0 1 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([[ 0.,  1.],</span>
<span class="go">       [ 2.,  3.]])</span>
</pre></div>
</div>
<p>In practice, we rarely enter items one by one...</p>
<blockquote>
<ul>
<li><p class="first">Evenly spaced values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># de 0 a n-1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">9.</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c"># syntax : start, end, step</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([ 1.,  3.,  5.,  7.])</span>
</pre></div>
</div>
<p>or by specifying the number of points:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">array([ 0. ,  0.2,  0.4,  0.6,  0.8,  1. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">array([ 0. ,  0.2,  0.4,  0.6,  0.8])</span>
</pre></div>
</div>
</li>
<li><p class="first">Constructors for common arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 1.,  1.,  1.],</span>
<span class="go">       [ 1.,  1.,  1.],</span>
<span class="go">       [ 1.,  1.,  1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;float64&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([1, 1, 1, 1, 1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">array([[ 0.,  0.],</span>
<span class="go">       [ 0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">array([[ 1.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.]])</span>
</pre></div>
</div>
</li>
</ul>
</blockquote>
</div>
<div class="section" id="graphical-data-representation-matplotlib-and-mayavi">
<h2>4.2. Graphical data representation : matplotlib and Mayavi<a class="headerlink" href="#graphical-data-representation-matplotlib-and-mayavi" title="Permalink to this headline">¶</a></h2>
<p>Now that we have our first data arrays, we are going to visualize them.
<strong>Matplotlib</strong> is a 2D plotting package. We can import its functions as below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pylab</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># or</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="o">*</span> <span class="c"># imports everything in the namespace</span>
</pre></div>
</div>
<p>If you launched Ipython with python(x,y), or with <tt class="docutils literal"><span class="pre">ipython</span>
<span class="pre">-pylab</span></tt> (under Linux), all the functions/objects of pylab are already
imported, without needing <tt class="docutils literal"><span class="pre">from</span> <span class="pre">pylab</span> <span class="pre">import</span> <span class="pre">*</span></tt>. In the remainder of this
tutorial, we assume you have already run <tt class="docutils literal"><span class="pre">from</span> <span class="pre">pylab</span> <span class="pre">import</span> <span class="pre">*</span></tt> or <tt class="docutils literal"><span class="pre">ipython</span>
<span class="pre">-pylab</span></tt>: as a consequence, we won&#8217;t write <tt class="docutils literal"><span class="pre">pylab.function()</span></tt> but directly
<tt class="docutils literal"><span class="pre">function</span></tt>.</p>
<p><strong>1D curve plotting</strong></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">In [7]: </span><span class="n">plot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="c"># line plot</span>
<span class="go">Out[7]: </span><span class="p">[</span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x95abd0c</span><span class="o">&gt;</span><span class="p">]</span>
<span class="gp">In [8]: </span><span class="n">plot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;o&#39;</span><span class="p">)</span> <span class="c"># dotted plot</span>
<span class="go">Out[8]: </span><span class="p">[</span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x95b1c8c</span><span class="o">&gt;</span><span class="p">]</span>
<span class="gp">In [9]: </span><span class="n">clf</span><span class="p">()</span> <span class="c"># clear figure</span>
<span class="gp">In [10]: </span><span class="n">loglog</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Out[10]: </span><span class="p">[</span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x95abf6c</span><span class="o">&gt;</span><span class="p">]</span>
<span class="gp">In [11]: </span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span> <span class="c"># a bit too small</span>
<span class="go">Out[11]: </span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x98923ec</span><span class="o">&gt;</span>
<span class="gp">In [12]: </span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">26</span><span class="p">)</span> <span class="c"># bigger</span>
<span class="go">Out[12]: </span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x98923ec</span><span class="o">&gt;</span>
<span class="gp">In [13]: </span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="go">Out[13]: </span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x9892b8c</span><span class="o">&gt;</span>
<span class="gp">In [14]: </span><span class="n">grid</span><span class="p">()</span>
<span class="gp">In [15]: </span><span class="n">axvline</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Out[15]: </span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x9b633cc</span><span class="o">&gt;</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/plot.png"><div align="center" class="align-center"><img alt="../_images/plot.png" class="align-center" src="../_images/plot.png" style="width: 537.6px; height: 244.8px;" /></div>
</a>
<p><strong>2D arrays</strong> (such as images)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [48]: </span><span class="c"># 30x30 array with random floats btw 0 and 1</span>
<span class="gp">In [49]: </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">In [50]: </span><span class="n">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="go">Out[50]: </span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">AxesImage</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x9e954ac</span><span class="o">&gt;</span>
<span class="gp">In [51]: </span><span class="n">gray</span><span class="p">()</span>
<span class="gp">In [52]: </span><span class="n">hot</span><span class="p">()</span>
<span class="gp">In [53]: </span><span class="n">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">gray</span><span class="p">)</span>
<span class="go">Out[53]: </span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">AxesImage</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xa23972c</span><span class="o">&gt;</span>
<span class="gp">In [54]: </span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span> <span class="c"># we remove ticks and labels</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/imshow.png"><div align="center" class="align-center"><img alt="../_images/imshow.png" class="align-center" src="../_images/imshow.png" style="width: 537.6px; height: 244.8px;" /></div>
</a>
<p>There are many other features in matplotlib: color choice, marker size,
latex font, inclusions within figures, histograms, etc.</p>
<p>To go further :</p>
<blockquote>
<ul class="simple">
<li>matplotlib documentation
<a class="reference external" href="http://matplotlib.sourceforge.net/contents.html">http://matplotlib.sourceforge.net/contents.html</a></li>
<li>an example gallery with corresponding sourcecode
<a class="reference external" href="http://matplotlib.sourceforge.net/gallery.html">http://matplotlib.sourceforge.net/gallery.html</a></li>
</ul>
</blockquote>
<p><strong>3D plotting</strong></p>
<p>For 3D visualization, we use another package: <strong>Mayavi</strong>. A quick example:
start with <strong>relaunching iPython</strong> with these options:
<strong>ipython -pylab -wthread</strong></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [59]: </span><span class="kn">from</span> <span class="nn">enthought.mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="gp">In [60]: </span><span class="n">mlab</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="go">get fences failed: -1</span>
<span class="go">param: 6, val: 0</span>
<span class="go">Out[60]: </span><span class="o">&lt;</span><span class="n">enthought</span><span class="o">.</span><span class="n">mayavi</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">Scene</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xcb2677c</span><span class="o">&gt;</span>
<span class="gp">In [61]: </span><span class="n">mlab</span><span class="o">.</span><span class="n">surf</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="go">Out[61]: </span><span class="o">&lt;</span><span class="n">enthought</span><span class="o">.</span><span class="n">mayavi</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">Surface</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xd0862fc</span><span class="o">&gt;</span>
<span class="gp">In [62]: </span><span class="n">mlab</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
<span class="go">Out[62]: </span><span class="o">&lt;</span><span class="n">enthought</span><span class="o">.</span><span class="n">mayavi</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">Axes</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xd07892c</span><span class="o">&gt;</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/surf1.png"><div align="center" class="align-center"><img alt="../_images/surf1.png" class="align-center" src="../_images/surf1.png" style="width: 238.8px; height: 189.6px;" /></div>
</a>
<p>The mayavi/mlab window that opens is interactive : by clicking on the left mouse button
you can rotate the image, zoom with the mouse wheel, etc.</p>
<a class="reference internal image-reference" href="../_images/potential.jpg"><div align="center" class="align-center"><img alt="../_images/potential.jpg" class="align-center" src="../_images/potential.jpg" style="width: 360.0px; height: 424.2px;" /></div>
</a>
<p>For more information on Mayavi :
<a class="reference external" href="http://code.enthought.com/projects/mayavi/docs/development/html/mayavi/index.html">http://code.enthought.com/projects/mayavi/docs/development/html/mayavi/index.html</a></p>
</div>
<div class="section" id="indexing">
<h2>4.3. Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h2>
<p>The items of an array can be accessed the same way as other Python sequences
(<tt class="docutils literal"><span class="pre">list</span></tt>, <tt class="docutils literal"><span class="pre">tuple</span></tt>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">(0, 2, 9)</span>
</pre></div>
</div>
<p>Warning! Indexes begin at 0, like other Python sequences (and C/C++).
In Fortran or Matlab, indexes begin with 1.</p>
<p>For multidimensional arrays, indexes are tuples of integers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[0, 0, 0, 0, 0],</span>
<span class="go">       [0, 1, 0, 0, 0],</span>
<span class="go">       [0, 0, 2, 0, 0],</span>
<span class="go">       [0, 0, 0, 3, 0],</span>
<span class="go">       [0, 0, 0, 0, 4]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span> <span class="c"># third line, second column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 0,  0,  0,  0,  0],</span>
<span class="go">       [ 0,  1,  0,  0,  0],</span>
<span class="go">       [ 0, 10,  2,  0,  0],</span>
<span class="go">       [ 0,  0,  0,  3,  0],</span>
<span class="go">       [ 0,  0,  0,  0,  4]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">array([0, 1, 0, 0, 0])</span>
</pre></div>
</div>
<p>Note that:</p>
<ul class="simple">
<li>In 2D, the first dimension corresponds to lines, the second to columns.</li>
<li>for an array <tt class="docutils literal"><span class="pre">a</span></tt> with more than one dimension,`a[0]` is interpreted by
taking all elements in the unspecified dimensions.</li>
</ul>
</div>
<div class="section" id="slicing">
<h2>4.4. Slicing<a class="headerlink" href="#slicing" title="Permalink to this headline">¶</a></h2>
<p>Like indexing, it&#8217;s similar to Python sequences slicing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">9</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="c"># [start:end:step]</span>
<span class="go">array([2, 5, 8])</span>
</pre></div>
</div>
<p>Note that the last index is not included!:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
<span class="go">array([0, 1, 2, 3])</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">start:end:step</span></tt> is a <tt class="docutils literal"><span class="pre">slice</span></tt> object which represents the set of indexes
<tt class="docutils literal"><span class="pre">range(start,</span> <span class="pre">end,</span> <span class="pre">step)</span></tt>. A <tt class="docutils literal"><span class="pre">slice</span></tt> can be explicitly created:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sl</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span>
<span class="go">(array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]), array([ 1,  3,  5,  7,  9, 11, 13, 15, 17, 19]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">sl</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="n">sl</span><span class="p">]</span>
<span class="go">(array([1, 3, 5, 7]), array([ 3,  7, 11, 15]))</span>
</pre></div>
</div>
<p>All three slice components are not required: by default, <cite>start</cite> is 0, <cite>end</cite> is the
last and <cite>step</cite> is 1:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">array([1, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
<span class="go">array([0, 2, 4, 6, 8])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
<span class="go">array([3, 4, 5, 6, 7, 8, 9])</span>
</pre></div>
</div>
<p>Of course, it works with multidimensional arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 1.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,:</span><span class="mi">3</span><span class="p">]</span> <span class="c">#3rd and 4th lines, 3 first columns</span>
<span class="go">array([[ 0.,  0.,  1.],</span>
<span class="go">       [ 0.,  0.,  0.]])</span>
</pre></div>
</div>
<p>All elements specified by a slice can be easily modified:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 4.,  4.,  4.,  0.,  0.],</span>
<span class="go">       [ 4.,  4.,  4.,  0.,  0.],</span>
<span class="go">       [ 4.,  4.,  4.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
<p>A small illustrated summary of Numpy indexing and slicing...</p>
<div align="center" class="align-center"><img alt="../_images/numpy_indexing.png" class="align-center" src="../_images/numpy_indexing.png" /></div>
<p>A slicing operation creates a <strong>view</strong> on the original array, which is just a way of
accessing array data. Thus the original array is not copied in memory. <em>When
modifying the view, the original array is modified as well*</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[::</span><span class="mi">2</span><span class="p">];</span> <span class="n">b</span>
<span class="go">array([0, 2, 4, 6, 8])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([12,  2,  4,  6,  8])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="c"># a a été modifié aussi !</span>
<span class="go">array([12,  1,  2,  3,  4,  5,  6,  7,  8,  9])</span>
</pre></div>
</div>
<p>This behaviour can be surprising at first sight... but it allows to save a lot
of memory.</p>
</div>
<div class="section" id="manipulating-the-shape-of-arrays">
<h2>4.5. Manipulating the shape of arrays<a class="headerlink" href="#manipulating-the-shape-of-arrays" title="Permalink to this headline">¶</a></h2>
<p>The shape of an array can be retrieved with the <tt class="docutils literal"><span class="pre">ndarray.shape</span></tt> method which
returns a tuple with the dimensions of the array:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(10,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># the shape tuple elements can be accessed</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># an other way of doing the same</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">(3, 4)</span>
</pre></div>
</div>
<p>Moreover, the length of the first dimension can be queried with <tt class="docutils literal"><span class="pre">np.alen</span></tt> (by
analogy with <tt class="docutils literal"><span class="pre">len</span></tt> for a list) and the total number of elements with
<tt class="docutils literal"><span class="pre">ndarray.size</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">alen</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">size</span>
<span class="go">12</span>
</pre></div>
</div>
<p>Several NumPy functions allow to create an array with a different shape, from
another array:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([[ 0,  1,  2,  3,  4,  5],</span>
<span class="go">       [ 6,  7,  8,  9, 10, 11],</span>
<span class="go">       [12, 13, 14, 15, 16, 17],</span>
<span class="go">       [18, 19, 20, 21, 22, 23],</span>
<span class="go">       [24, 25, 26, 27, 28, 29],</span>
<span class="go">       [30, 31, 32, 33, 34, 35]])</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">ndarray.reshape</span></tt> returns a view, not a copy:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([10,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,</span>
<span class="go">       17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,</span>
<span class="go">       34, 35])</span>
</pre></div>
</div>
<p>An array with a different number of elements can also be created with <tt class="docutils literal"><span class="pre">ndarray.resize</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[0, 1],</span>
<span class="go">       [2, 3],</span>
<span class="go">       [4, 5],</span>
<span class="go">       [6, 7]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([[0, 1],</span>
<span class="go">       [2, 3],</span>
<span class="go">       [0, 0]])</span>
</pre></div>
</div>
<p>A large array can be tiled with a smaller one:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[0, 1],</span>
<span class="go">       [2, 3]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="go">array([[0, 1, 0, 1, 0, 1],</span>
<span class="go">       [2, 3, 2, 3, 2, 3],</span>
<span class="go">       [0, 1, 0, 1, 0, 1],</span>
<span class="go">       [2, 3, 2, 3, 2, 3]])</span>
</pre></div>
</div>
</div>
<div class="section" id="exercises-some-simple-array-creations">
<h2>4.6. Exercises : some simple array creations<a class="headerlink" href="#exercises-some-simple-array-creations" title="Permalink to this headline">¶</a></h2>
<p>By using miscellaneous constructors, indexing, slicing, and simple operations
(+/-/x/:), large arrays with various patterns can be created.</p>
<p><strong>Example</strong> : create this array:</p>
<div class="highlight-python"><pre>[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13  0]
 [15 16 17 18 19]
 [20 21 22 23 24]]</pre>
</div>
<p><strong>Solution</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p><strong>Exercises</strong> : Create the following array with the simplest solution:</p>
<div class="highlight-python"><pre>[[ 1.  1.  1.  1.]
 [ 1.  1.  1.  1.]
 [ 1.  1.  1.  2.]
 [ 1.  6.  1.  1.]]

[[0 0 0 0 0]
 [2 0 0 0 0]
 [0 3 0 0 0]
 [0 0 4 0 0]
 [0 0 0 5 0]
 [0 0 0 0 6]]</pre>
</div>
</div>
<div class="section" id="real-data-read-write-arrays-from-to-files">
<h2>4.7. Real data: read/write arrays from/to files<a class="headerlink" href="#real-data-read-write-arrays-from-to-files" title="Permalink to this headline">¶</a></h2>
<p>Often, our experiments or simulations write some results in files. These results
must then be loaded in Python as NumPy arrays to be able to manipulate them. We
also need to save some arrays into files.</p>
<p><strong>Going to the right folder</strong></p>
<p>To move in a folder hierarchy:</p>
<blockquote>
<ul class="simple">
<li>use the iPython commands: <tt class="docutils literal"><span class="pre">cd</span></tt>, <tt class="docutils literal"><span class="pre">pwd</span></tt>,
tab-completion.</li>
</ul>
</blockquote>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="n">mkdir</span> <span class="n">python_scripts</span>

<span class="gp">In [2]: </span><span class="n">cd</span> <span class="n">python_scripts</span><span class="o">/</span>
<span class="go">/home/gouillar/python_scripts</span>

<span class="gp">In [3]: </span><span class="n">pwd</span>
<span class="go">Out[3]: </span><span class="s">&#39;/home/gouillar/python_scripts&#39;</span>

<span class="gp">In [4]: </span><span class="n">ls</span>

<span class="gp">In [5]: </span><span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s">&#39;integers.txt&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="gp">In [6]: </span><span class="n">ls</span>
<span class="go">integers.txt</span>
</pre></div>
</div>
<blockquote>
<blockquote>
<ul class="simple">
<li>os (system routines) and os.path (path management) modules:</li>
</ul>
</blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">os.path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_dir</span>
<span class="go">&#39;/home/gouillar/sandbox&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_dir</span><span class="p">,</span> <span class="s">&#39;data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dir</span>
<span class="go">&#39;/home/gouillar/sandbox/data&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)):</span>
<span class="go">      ...     os.mkdir(&#39;data&#39;)</span>
<span class="go">      ...     print &quot;created &#39;data&#39; folder&quot;</span>
<span class="go">      ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span> <span class="c"># or in Ipython : cd data</span>
</pre></div>
</div>
</blockquote>
<p>IPython can actually be used like a shell, thanks to its integrated features and
the os module.</p>
<p><strong>Writing a data array in a file</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<ul>
<li><p class="first">Writing a text file (in ASCII):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s">&#39;data_a.txt&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Writing a binary file (<tt class="docutils literal"><span class="pre">.npy</span></tt> extension, recommended format)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;data_a.npy&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Loading a data array from a file</strong></p>
<ul>
<li><p class="first">Reading from a text file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s">&#39;data_a.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Reading from a binary file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;data_a.npy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<div class="topic">
<p class="topic-title first">To read matlab data files</p>
<p><tt class="docutils literal"><span class="pre">scipy.io.loadmat</span></tt> : the matlab structure of a .mat file is stored as a
dictionary.</p>
</div>
<p><strong>Opening and saving images: imsave and imread</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">imread</span><span class="p">,</span> <span class="n">imsave</span><span class="p">,</span> <span class="n">savefig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lena</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">lena</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imsave</span><span class="p">(</span><span class="s">&#39;lena.png&#39;</span><span class="p">,</span> <span class="n">lena</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">gray</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lena_reloaded</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s">&#39;lena.png&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imshow</span><span class="p">(</span><span class="n">lena_reloaded</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">gray</span><span class="p">)</span>
<span class="go">&lt;matplotlib.image.AxesImage object at 0x989e14c&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;lena_figure.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div align="center" class="align-center"><img alt="../_images/lena_figure.png" class="align-center" src="../_images/lena_figure.png" style="width: 60px;" /></div>
<p><strong>Selecting a file from a list</strong></p>
<p>Each line of <tt class="docutils literal"><span class="pre">a</span></tt> will be saved in a different file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span>
<span class="gp">... </span>    <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s">&#39;line_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">l</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0 [0 1 2 3 4 5 6 7 8 9]</span>
<span class="go">1 [10 11 12 13 14 15 16 17 18 19]</span>
<span class="go">2 [20 21 22 23 24 25 26 27 28 29]</span>
<span class="go">3 [30 31 32 33 34 35 36 37 38 39]</span>
<span class="go">4 [40 41 42 43 44 45 46 47 48 49]</span>
<span class="go">5 [50 51 52 53 54 55 56 57 58 59]</span>
<span class="go">6 [60 61 62 63 64 65 66 67 68 69]</span>
<span class="go">7 [70 71 72 73 74 75 76 77 78 79]</span>
<span class="go">8 [80 81 82 83 84 85 86 87 88 89]</span>
<span class="go">9 [90 91 92 93 94 95 96 97 98 99]</span>
</pre></div>
</div>
<p>To get a list of all files beginning with <tt class="docutils literal"><span class="pre">line</span></tt>, we use the <tt class="docutils literal"><span class="pre">glob</span></tt> module
which matches all paths corresponding to a pattern. Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">glob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filelist</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">&#39;line*&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filelist</span>
<span class="go">[&#39;line_0&#39;, &#39;line_1&#39;, &#39;line_2&#39;, &#39;line_3&#39;, &#39;line_4&#39;, &#39;line_5&#39;, &#39;line_6&#39;, &#39;line_7&#39;, &#39;line_8&#39;, &#39;line_9&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Note that the line is not always sorted</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filelist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filelist</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>Note: arrays can also be created from Excel/Calc files, HDF5 files, etc.
(but with additional modules not described here: xlrd, pytables, etc.).</p>
</div>
<div class="section" id="simple-mathematical-and-statistical-operations-on-arrays">
<h2>4.8. Simple mathematical and statistical operations on arrays<a class="headerlink" href="#simple-mathematical-and-statistical-operations-on-arrays" title="Permalink to this headline">¶</a></h2>
<p>Some operations on arrays are natively available in NumPy (and are generally
very efficient):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="c"># or np.min(a)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="c"># or np.max(a)</span>
<span class="go">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c"># or np.sum(a)</span>
<span class="go">45</span>
</pre></div>
</div>
<p>Operations can also be run along an axis, instead of on all elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[1, 3],</span>
<span class="go">       [9, 6]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c"># the array contains the mean of each column</span>
<span class="go">array([ 5. ,  4.5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c"># the array contains the mean of each line</span>
<span class="go">array([ 2. ,  7.5])</span>
</pre></div>
</div>
<p>Many other operations are available. We will discover some of them in this
course.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Arithmetic operations on arrays correspond to operations on each individual
element. In particular, the multiplication is not a matrix multiplication
(<strong>unlike Matlab</strong>)! The matrix multiplication is provided by <tt class="docutils literal"><span class="pre">np.dot</span></tt>:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">*</span><span class="n">a</span>
<span class="go">array([[ 1.,  1.],</span>
<span class="go">       [ 1.,  1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([[ 2.,  2.],</span>
<span class="go">       [ 2.,  2.]])</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong> : diffusion simulation using a random walk algorithm</p>
<div align="center" class="align-center"><img alt="../_images/random_walk.png" class="align-center" src="../_images/random_walk.png" /></div>
<p>What is the typical distance from the origin of a random walker after <tt class="docutils literal"><span class="pre">t</span></tt> left
or right jumps?</p>
<div align="center" class="align-center"><img alt="../_images/random_walk_schema.png" class="align-center" src="../_images/random_walk_schema.png" /></div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nreal</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c"># number of walks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tmax</span> <span class="o">=</span> <span class="mi">200</span> <span class="c"># time during which we follow the walker</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># We randomly choose all the steps 1 or -1 of the walk</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">walk</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random_integers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">nreal</span><span class="p">,</span><span class="n">tmax</span><span class="p">))</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span> <span class="c"># Verification : all steps are 1 or -1</span>
<span class="go">array([-1.,  1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># We build the walks by summing steps along the time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cumwalk</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">walk</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c"># axis = 1 : dimension of time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sq_distance</span> <span class="o">=</span> <span class="n">cumwalk</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># We get the mean in the axis of the steps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mean_sq_distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">sq_distance</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [39]: </span><span class="n">figure</span><span class="p">()</span>
<span class="gp">In [40]: </span><span class="n">plot</span><span class="p">(</span><span class="n">mean_sq_distance</span><span class="p">)</span>
<span class="gp">In [41]: </span><span class="n">figure</span><span class="p">()</span>
<span class="gp">In [42]: </span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mean_sq_distance</span><span class="p">))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/diffuse.png"><div align="center" class="align-center"><img alt="../_images/diffuse.png" class="align-center" src="../_images/diffuse.png" style="width: 813.4px; height: 401.1px;" /></div>
</a>
<p>We find again that the distance grows like the square root of the time!</p>
<p><strong>Exercise</strong> : statistics on the number of women in french research (INSEE data)</p>
<ol class="arabic simple">
<li>Get the following files <tt class="docutils literal"><span class="pre">organisms.txt</span></tt> and <tt class="docutils literal"><span class="pre">women_percentage.txt</span></tt>
in the <tt class="docutils literal"><span class="pre">data</span></tt> directory.</li>
<li>Create a <tt class="docutils literal"><span class="pre">data</span></tt> array by opening the <tt class="docutils literal"><span class="pre">women_percentage.txt</span></tt> file
with <tt class="docutils literal"><span class="pre">np.loadtxt</span></tt>. What is the shape of this array?</li>
<li>Columns correspond to year 2006 to 2001. Create a <tt class="docutils literal"><span class="pre">years</span></tt> array with
integers corresponding to these years.</li>
<li>The different lines correspond to the research organisms whose names are
stored in the <tt class="docutils literal"><span class="pre">organisms.txt</span></tt> file. Create a <tt class="docutils literal"><span class="pre">organisms</span></tt> array by
opening this file. Beware that <tt class="docutils literal"><span class="pre">np.loadtxt</span></tt> creates float arrays by default,
and it must be specified to use strings instead: <tt class="docutils literal"><span class="pre">organisms</span> <span class="pre">=</span>
<span class="pre">np.loadtxt('organisms.txt',</span> <span class="pre">dtype=str)</span></tt></li>
<li>Check that the number of lines of <tt class="docutils literal"><span class="pre">data</span></tt> equals the number of lines of the
organisms.</li>
<li>What is the maximal percentage of women in all organisms, for all years taken
together?</li>
<li>Create an array with the temporal mean of the percentage of women for each
organism? (i.e. the mean of <tt class="docutils literal"><span class="pre">data</span></tt> along axis 1).</li>
<li>Which organism had the highest percentage of women in 2004? (hint: np.argmax)</li>
<li>Create a histogram of the percentage of women the different organisms in 2006
(hint: np.histogram, then matplotlib bar or plot for visulalization)</li>
<li>Create an array that contains the organism where the highest women&#8217;s
percentage is found for the different years.</li>
</ol>
<p><strong>Answers</strong> <em class="xref std std-ref">stat_recherche</em></p>
</div>
<div class="section" id="fancy-indexing">
<h2>4.9. Fancy indexing<a class="headerlink" href="#fancy-indexing" title="Permalink to this headline">¶</a></h2>
<p>Numpy arrays can be indexed with slices, but also with boolean or integer arrays
(<strong>masks</strong>). This method is called <em>fancy indexing</em>.</p>
<p><strong>Masks</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random_integers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([10,  3,  8,  0, 19, 10, 11,  9, 10,  6,  0, 20, 12,  7, 14])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">a</span><span class="o">%</span><span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">array([False,  True, False,  True, False, False, False,  True, False,</span>
<span class="go">        True,  True, False,  True, False, False], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">%</span><span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_from_a</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="c">#one could directly write a[a%3==0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_from_a</span> <span class="c"># extract a sub-array with the mask</span>
<span class="go">array([ 3,  0,  9,  6,  0, 12])</span>
</pre></div>
</div>
<p>Extracting a sub-array using a mask produces a copy of this sub-array, not a
view:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">extract_from_a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([10,  3,  8,  0, 19, 10, 11,  9, 10,  6,  0, 20, 12,  7, 14])</span>
</pre></div>
</div>
<p>Indexing with a mask can be very useful to assign a new value to a sub-array:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([10,  0,  8,  0, 19, 10, 11,  0, 10,  0,  0, 20,  0,  7, 14])</span>
</pre></div>
</div>
<p><strong>Indexing with an array of integers</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span><span class="mi">3</span> <span class="c">#to avoid having always the same np.arange(10)...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([ 3,  1,  5,  3,  7,  5,  9,  7, 11,  9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">]]</span> <span class="c"># or a[np.array([2, 5, 1, 8])]</span>
<span class="go">array([ 5,  5,  1, 11])</span>
</pre></div>
</div>
<p>Indexing can be done with an array of integers, where the same index is repeated
several time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="go">array([5, 3, 5, 7, 5])</span>
</pre></div>
</div>
<p>New values can be assigned with this kind of indexing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([  3,   1,   5,   3,   7,   5,   9, -10,  11, -10])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span> <span class="o">+=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([  3,   1,   6,   4,   8,   5,   9, -10,  11, -10])</span>
</pre></div>
</div>
<p>When a new array is created by indexing with an array of integers, the new array
has the same shape than the array of integers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<span class="go">array([[3, 4],</span>
<span class="go">       [9, 7]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 0,  1,  2,  3],</span>
<span class="go">       [ 4,  5,  6,  7],</span>
<span class="go">       [ 8,  9, 10, 11]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
<span class="go">array([ 2,  5,  7, 11])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span>
<span class="go">array([[0, 1],</span>
<span class="go">       [1, 2]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span>
<span class="go">array([[2, 1],</span>
<span class="go">       [3, 3]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
<span class="go">array([[ 2,  5],</span>
<span class="go">       [ 7, 11]])</span>
</pre></div>
</div>
<div align="center" class="align-center"><img alt="../_images/numpy_fancy_indexing.png" class="align-center" src="../_images/numpy_fancy_indexing.png" /></div>
<p><strong>Exercise</strong></p>
<p>Let&#8217;s take the same statistics about the percentage of women in the research
(<tt class="docutils literal"><span class="pre">data</span></tt> and <tt class="docutils literal"><span class="pre">organisms</span></tt> arrays)</p>
<ol class="arabic simple">
<li>Create a <tt class="docutils literal"><span class="pre">sup30</span></tt> array of the same size than <tt class="docutils literal"><span class="pre">data</span></tt> with a value of 1 if
the value of <tt class="docutils literal"><span class="pre">data</span></tt> is greater than 30%, 0 otherwise.</li>
</ol>
<p>2. Create an array containing the organisme having the greatest percentage of
women of each year.</p>
<p><strong>Answers</strong> <em class="xref std std-ref">stat_recherche</em></p>
</div>
<div class="section" id="broadcasting">
<h2>4.10. Broadcasting<a class="headerlink" href="#broadcasting" title="Permalink to this headline">¶</a></h2>
<p>Basic operations on <tt class="docutils literal"><span class="pre">numpy</span></tt> arrays (addition, etc.) are done element by
element, thus work on arrays of the same size. Nevertheless, it&#8217;s possible to do
operations on arrays of different sizes if <tt class="docutils literal"><span class="pre">numpy</span></tt> can transform these arrays
so that they all have the same size: this conversion is called <strong>broadcasting</strong>.</p>
<p>The image below gives an example of broadcasting:</p>
<div align="center" class="align-center"><img alt="../_images/numpy_broadcasting.png" class="align-center" src="../_images/numpy_broadcasting.png" /></div>
<p>which gives the following in Ipython:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span> <span class="c"># a must be changed into a vertical array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="go">array([[ 0,  1,  2],</span>
<span class="go">       [10, 11, 12],</span>
<span class="go">       [20, 21, 22],</span>
<span class="go">       [30, 31, 32]])</span>
</pre></div>
</div>
<p>We actually already used broadcasting without knowing it!:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 0,  1,  2,  3,  4],</span>
<span class="go">       [ 5,  6,  7,  8,  9],</span>
<span class="go">       [10, 11, 12, 13, 14],</span>
<span class="go">       [15, 16, 17, 18, 19]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c"># we assign an array of dimension 0 to an array of dimension 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 1,  2,  3,  4,  5],</span>
<span class="go">       [ 1,  2,  3,  4,  5],</span>
<span class="go">       [ 1,  2,  3,  4,  5],</span>
<span class="go">       [15, 16, 17, 18, 19]])</span>
</pre></div>
</div>
<p>We can even use fancy indexing and broadcasting at the same time. Take again the
same example as above::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 0,  1,  2,  3],</span>
<span class="go">       [ 4,  5,  6,  7],</span>
<span class="go">       [ 8,  9, 10, 11]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="p">[</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>             <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="c"># same as a[i, 2*np.ones((2,2), dtype=int)]</span>
<span class="go">array([[ 2,  6],</span>
<span class="go">       [ 6, 10]])</span>
</pre></div>
</div>
<p>Broadcasting seems a bit magical, but it is actually quite natural to use it
when we want to solve a problem whose output data is an array with more
dimensions than input data.</p>
<p><strong>Example</strong>: let&#8217;s construct an array of distances (in miles) between cities of
Route 66: Chicago, Springfield, Saint-Louis, Tulsa,
Oklahoma City, Amarillo, Santa Fe, Albucquerque, Flagstaff and Los
Angeles.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mileposts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">198</span><span class="p">,</span> <span class="mi">303</span><span class="p">,</span> <span class="mi">736</span><span class="p">,</span> <span class="mi">871</span><span class="p">,</span> <span class="mi">1175</span><span class="p">,</span> <span class="mi">1475</span><span class="p">,</span> <span class="mi">1544</span><span class="p">,</span>
<span class="gp">... </span>       <span class="mi">1913</span><span class="p">,</span> <span class="mi">2448</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ditance_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">mileposts</span> <span class="o">-</span> <span class="n">mileposts</span><span class="p">[:,</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ditance_array</span>
<span class="go">array([[   0,  198,  303,  736,  871, 1175, 1475, 1544, 1913, 2448],</span>
<span class="go">       [ 198,    0,  105,  538,  673,  977, 1277, 1346, 1715, 2250],</span>
<span class="go">       [ 303,  105,    0,  433,  568,  872, 1172, 1241, 1610, 2145],</span>
<span class="go">       [ 736,  538,  433,    0,  135,  439,  739,  808, 1177, 1712],</span>
<span class="go">       [ 871,  673,  568,  135,    0,  304,  604,  673, 1042, 1577],</span>
<span class="go">       [1175,  977,  872,  439,  304,    0,  300,  369,  738, 1273],</span>
<span class="go">       [1475, 1277, 1172,  739,  604,  300,    0,   69,  438,  973],</span>
<span class="go">       [1544, 1346, 1241,  808,  673,  369,   69,    0,  369,  904],</span>
<span class="go">       [1913, 1715, 1610, 1177, 1042,  738,  438,  369,    0,  535],</span>
<span class="go">       [2448, 2250, 2145, 1712, 1577, 1273,  973,  904,  535,    0]])</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/route66.png"><div align="center" class="align-center"><img alt="../_images/route66.png" class="align-center" src="../_images/route66.png" style="width: 342.0px; height: 210.0px;" /></div>
</a>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Good practices</p>
<p>In the previous example, we can note some good (and bad) practices:</p>
<ul class="last simple">
<li>Give explicit variable names (no need of a comment to explain what is in
the variable)</li>
<li>Put spaces after commas, around <tt class="docutils literal"><span class="pre">=</span></tt>, etc. A certain number of rules
for writing &#8220;beautiful&#8221; code (and more importantly using the same
conventions as anybody else!) are given in the <a class="reference external" href="http://www.python.org/dev/peps/pep-0008">Style Guide for Python
Code</a> and the <a class="reference external" href="http://www.python.org/dev/peps/pep-0257">Docstring
Conventions</a> page (to manage
help strings).</li>
<li>Except some rare cases, write variable names and comments in english.</li>
</ul>
</div>
<p>A lot of grid-based or network-based problems can also use broadcasting. For instance,
if we want to compute the distance from the origin of points on a 10x10 grid, we
can do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span>
<span class="go">array([[ 0.        ,  1.        ,  2.        ,  3.        ,  4.        ],</span>
<span class="go">       [ 1.        ,  1.41421356,  2.23606798,  3.16227766,  4.12310563],</span>
<span class="go">       [ 2.        ,  2.23606798,  2.82842712,  3.60555128,  4.47213595],</span>
<span class="go">       [ 3.        ,  3.16227766,  3.60555128,  4.24264069,  5.        ],</span>
<span class="go">       [ 4.        ,  4.12310563,  4.47213595,  5.        ,  5.65685425]])</span>
</pre></div>
</div>
<p>The values of the distance array can be represented in colour, thanks to the
<tt class="docutils literal"><span class="pre">pylab.imshow</span></tt> function (syntax: <tt class="docutils literal"><span class="pre">pylab.imshow(distance)</span></tt>. See help for
other options).</p>
<a class="reference internal image-reference" href="../_images/distance.png"><div align="center" class="align-center"><img alt="../_images/distance.png" class="align-center" src="../_images/distance.png" style="width: 218.4px; height: 218.4px;" /></div>
</a>
<p><strong>Remark</strong> : the <tt class="docutils literal"><span class="pre">numpy.ogrid</span></tt> function allows to directly create vectors x
and y of the previous example, with two &#8220;significant dimensions&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="go">(array([[0],</span>
<span class="go">       [1],</span>
<span class="go">       [2],</span>
<span class="go">       [3],</span>
<span class="go">       [4]]), array([[0, 1, 2, 3, 4]]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span>
<span class="go">((5, 1), (1, 5))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>So, <tt class="docutils literal"><span class="pre">np.ogrid</span></tt> is very useful as soon as we have to handle computations on a
network. On the other hand, <tt class="docutils literal"><span class="pre">np.mgrid</span></tt> directly provides matrices full of
indices for cases where we can&#8217;t (or don&#8217;t want to) benefit from broadcasting:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">array([[0, 0, 0, 0],</span>
<span class="go">       [1, 1, 1, 1],</span>
<span class="go">       [2, 2, 2, 2],</span>
<span class="go">       [3, 3, 3, 3]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">array([[0, 1, 2, 3],</span>
<span class="go">       [0, 1, 2, 3],</span>
<span class="go">       [0, 1, 2, 3],</span>
<span class="go">       [0, 1, 2, 3]])</span>
</pre></div>
</div>
</div>
<div class="section" id="synthesis-exercises-framing-lena">
<h2>4.11. Synthesis exercises: framing Lena<a class="headerlink" href="#synthesis-exercises-framing-lena" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s do some manipulations on numpy arrays by starting with the famous image of
Lena (<a class="reference external" href="http://www.cs.cmu.edu/~chuck/lennapg/">http://www.cs.cmu.edu/~chuck/lennapg/</a>). <tt class="docutils literal"><span class="pre">scipy</span></tt> provides a 2D array of
this image with the <tt class="docutils literal"><span class="pre">scipy.lena</span></tt> function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lena</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">lena</span><span class="p">()</span>
</pre></div>
</div>
<p>Here are a few images we will be able to obtain with our manipulations:
use different colormaps, crop the image, change some parts of the image.</p>
<div align="center" class="align-center"><img alt="../_images/lenas.png" class="align-center" src="../_images/lenas.png" /></div>
<ul class="simple">
<li>Let&#8217;s use the imshow function of pylab to display the image.</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [3]: </span><span class="kn">import</span> <span class="nn">pylab</span>
<span class="gp">In [4]: </span><span class="n">lena</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">lena</span><span class="p">()</span>
<span class="gp">In [5]: </span><span class="n">pylab</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">lena</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Lena is then displayed in false colors. A colormap must be specified for her
to be displayed in grey.</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="n">pylab</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">lena</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">gray</span><span class="p">)</span>
<span class="gp">In [7]: </span><span class="c"># ou</span>
<span class="gp">In [8]: </span><span class="n">gray</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>Create an array of the image with a narrower centring : for example,
remove 30 pixels from all the borders of the image. To check the result,
display this new array with <tt class="docutils literal"><span class="pre">imshow</span></tt>.</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [9]: </span><span class="n">crop_lena</span> <span class="o">=</span> <span class="n">lena</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">:</span><span class="o">-</span><span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
<ul>
<li><p class="first">We will now frame Lena&#8217;s face with a black locket. For this, we need to</p>
<blockquote>
<ul class="simple">
<li>create a mask corresponding to the pixels we want to be black.
The mask is defined by this condition <tt class="docutils literal"><span class="pre">(y-256)**2</span> <span class="pre">+</span> <span class="pre">(x-256)**2</span></tt></li>
</ul>
</blockquote>
</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [15]: </span><span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">512</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">512</span><span class="p">]</span> <span class="c"># x and y indices of pixels</span>
<span class="gp">In [16]: </span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span>
<span class="go">Out[16]: </span><span class="p">((</span><span class="mi">512</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">512</span><span class="p">))</span>
<span class="gp">In [17]: </span><span class="n">centerx</span><span class="p">,</span> <span class="n">centery</span> <span class="o">=</span> <span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span> <span class="c"># center of the image</span>
<span class="gp">In [18]: </span><span class="n">mask</span> <span class="o">=</span> <span class="p">((</span><span class="n">y</span> <span class="o">-</span> <span class="n">centery</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">centerx</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">&gt;</span> <span class="mi">230</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<p>then</p>
<blockquote>
<ul class="simple">
<li>assign the value 0 to the pixels of the image corresponding to the mask.
The syntax is extremely simple and intuitive:</li>
</ul>
</blockquote>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [19]: </span><span class="n">lena</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
<span class="gp">In [20]: </span><span class="n">imshow</span><span class="p">(</span><span class="n">lena</span><span class="p">)</span>
<span class="go">Out[20]: </span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">AxesImage</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xa36534c</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Subsidiary question : copy all instructions of this exercise in a script
called <tt class="docutils literal"><span class="pre">lena_locket.py</span></tt> then execute this script in iPython with <tt class="docutils literal"><span class="pre">%run</span>
<span class="pre">lena_locket.py</span></tt>.</li>
</ul>
<div class="topic">
<p class="topic-title first">Conclusion : what do you need to know about numpy arrays to start?</p>
<blockquote>
<ul class="simple">
<li>Know how to create arrays : <tt class="docutils literal"><span class="pre">array</span></tt>, <tt class="docutils literal"><span class="pre">arange</span></tt>, <tt class="docutils literal"><span class="pre">ones</span></tt>,
<tt class="docutils literal"><span class="pre">zeros</span></tt>.</li>
<li>Know the shape of the array with <tt class="docutils literal"><span class="pre">array.shape</span></tt>, then use slicing
to obtain different views of the array: <tt class="docutils literal"><span class="pre">array[::2]</span></tt>,
etc. Change the shape of the array using <tt class="docutils literal"><span class="pre">reshape</span></tt>.</li>
<li>Obtain a subset of the elements of an array and/or modify their values
with masks:</li>
</ul>
</blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<blockquote>
<ul class="simple">
<li>Know miscellaneous operations on arrays, like finding the mean or max
(<tt class="docutils literal"><span class="pre">array.max()</span></tt>, <tt class="docutils literal"><span class="pre">array.mean()</span></tt>). No need to retain everything, but
have the reflex to search in the documentation (see <a class="reference internal" href="../help/help.html#help"><em>Getting help and finding documentation</em></a>) !!</li>
<li>For advanced use: master the indexing with arrays of integers, as well as
broadcasting. Know more functions of numpy allowing to handle array
operations.</li>
</ul>
</blockquote>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../help/help.html" title="5. Getting help and finding documentation"
             >next</a></li>
        <li class="right" >
          <a href="../language/oop.html" title="3.10. Object-oriented programming (OOP)"
             >previous</a> |</li>
        <li><a href="../index.html">Scipy Lecture Notes</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre/1f40a2bc5294.
    </div>
  </body>
</html>